# 项目概要（游戏推荐平台后端）

  ## 核心定位

  - 基于 Django 4.2 + DRF 的游戏推荐与社区后端，支持用户、内容、推荐、数据分析与
    系统管理。
  - 依赖 MySQL 8.0、Redis、Celery、Scrapy，提供 JWT 认证和 OpenAPI 3 文档。

  ## 主要模块

  - 用户与权限：RBAC、JWT 登录、操作日志。
  - 游戏与推荐：游戏信息、收藏、热度/个性化推荐（静态热度、动态热度衰减公式）。
  - 内容与社区：攻略发布/审核、收藏/点赞，动态、评论、话题、举报。
  - 数据分析：定时爬取、数据清洗、指标计算、可视化接口。
  - 系统管理：日志、配置、数据库备份/恢复、创作者激励。

  ## 目录结构要点

  - 业务应用：apps/（users, games, recommendations, content, community,
    analytics, system）。
  - 全局配置：config/（分环境设置、路由、Celery、权限）。
  - 爬虫：crawlers/game_crawler/；运维脚本：scripts/（db_backup.py,
    crawl_run.py）。
  - 部署与容器：docker/；API 文档：openapi/；运行产物：logs/, media/, backups/。

  ## 环境与运行

  - Python 3.10+；安装依赖：pip install -r requirements.txt（建议虚拟环境）。
  - 配置：cp .env.example .env 后填写数据库、Redis、JWT 等。
  - 初始化：python manage.py makemigrations && python manage.py migrate。
  - 本地启动：python manage.py runserver 0.0.0.0:8000
    --settings=config.settings.dev。
  - 异步任务：celery -A config worker -l info、celery -A config beat -l info（需
    Redis）。
  - 容器：docker-compose up -d，日志：docker-compose logs -f。

  ## 测试

  - 运行全部：python manage.py test；可指定应用：python manage.py test
    apps.users。
  - 建议在各 app 下以 tests/test_<feature>.py 组织，用 APITestCase/APIClient 覆
    盖接口，关注权限、缓存、Celery 侧效应。

  ## 安全与发布

  - 不提交 .env、logs/、media/、backups/ 等敏感/运行文件。
  - 生产：DJANGO_SETTINGS_MODULE=config.settings.prod，python manage.py
    collectstatic --noinput，通过 gunicorn + nginx（参考 docker/nginx.conf）部
    署；确保 Redis 和 Celery 可用后再开放推荐接口。